# Capítulo III: Requirements specification
## 3.1. To-Be Scenario Mapping.

<div align="justify"

- **Segmento Objetivo 1: Estudiantes**

Para el estudiante, el TO-BE introduce un ciclo de práctica con editor embebido, validación automática y retroalimentación instantánea. Además, los sistemas de progreso, rankings e insignias convierten el aprendizaje en un proceso motivador y continuo, en lugar de depender exclusivamente de las notas finales. El resultado es una experiencia más clara, dinámica y atractiva, que fomenta tanto la autonomía como la constancia en el estudio.

<img src="https://i.imgur.com/UPDYumb.png" alt="TOBE1"/>

- **Segmento Objetivo 2: Profesores**

Para el docente, la plataforma centraliza la gestión de retos y automatiza la retroalimentación inicial. Esto le permite dedicar menos tiempo a tareas repetitivas y más a la orientación pedagógica. Los dashboards con métricas de avance facilitan la detección temprana de estudiantes en riesgo y reducen la carga administrativa. La proyección TO-BE ofrece, en consecuencia, una experiencia más sostenible, eficiente y alineada con las necesidades académicas.

<img src="https://i.imgur.com/AiK7wYp.png" alt="TOBE1"/>

</div>

## 3.2. User Stories.

| Epic / Story ID |                      Título                      | Descripción                                                  | Criterios de Aceptación                                      | Relacionado con (Epic ID) |
| :-------------: | :----------------------------------------------: | :----------------------------------------------------------- | ------------------------------------------------------------ | ------------------------: |
|      US01       |               Student Registration               | As a StudentI want to access the Sign-up pageSo that I can register with my email and password | Scenario: User opens Sign-up pageGiven the user is not authenticatedWhen the user navigates to the "Sign-up" pageThen the system displays the registration formAnd the user is able to register Scenario: User registers successfullyGiven the Sign-up page is displayedWhen the user enters a valid inputAnd proceeds to registrationThen the system validates the inputAnd the system redirects the user to the Sign-in page Scenario: Empty input fieldGiven the Sign-up page is displayedWhen the user leaves the an input field emptyAnd proceeds to registrationThen the system shows an error message |                         1 |
|      US02       |         Add Student through RESTful API          | As a DeveloperI want to add a Student through the APISo that it can be available to build features for my applications. | Scenario: Add Student with unique email Given the endpoint /api/v1/authentication/sign-up is availableWhen a POST request is sent with values for email, password, and nameAnd the email does not already exist in the databaseThen a response is received with Status 201And a Student Resource is included in the Response Body with:a new generated IDregistered values for email and namerole: STUDENTAnd the password is stored hashed with BCrypt Scenario: Add Student with existing email Given the endpoint /api/v1/authentication/sign-up is availableWhen a POST request is sent with values for email, password, and nameAnd a Student Resource with the same email is already storedThen a response is received with Status 400And a message is included in the Response Body:User with email student@example.com already exists  Scenario: Invalid email format Given the endpoint /api/v1/authentication/sign-up is availableWhen a POST request is sent with an incorrectly formatted email (e.g. invalid-email)Then a response is received with Status 400And a message is included: Invalid email format Scenario: Missing required fields Given the endpoint /api/v1/authentication/sign-up is availableWhen a POST request is sent without email or passwordThen a response is received with Status 400And a message is included: Email address and password are required |                         1 |
|      US03       |              Student Authentication              | As a StudentI want to access the Sign-in pageSo that I can authenticate with my email and password | Scenario: Student opens Sign-in pageGiven the student is not authenticatedWhen the student navigates to the "Sign-in" pageThen the system displays the authentication formAnd the student is able to sign in Scenario: Student signs in successfullyGiven the Sign-in page is displayedWhen the student enters valid credentialsThen the system validates the inputAnd the student accesses the platform Scenario: Empty inputGiven the Sign-in page is displayedWhen the student submits without completing a required fieldThen the system shows an error message Scenario: Incorrect credentialsGiven the Sign-in page is displayedWhen the student enters invalid credentialsThen the system shows an error messageAnd the student remains on the Sign-in page |                         1 |
|      US04       |   Add Authenticate Student through RESTful API   | As a Developer I want to authenticate a Student through the API So that the Student can access the protected functionalities of the application | Scenario: Successful authentication with valid credentials Given the endpoint "/api/v1/authentication/sign-in" is availableWhen a POST request is sent with values for email and password:email: "student@example.com"password: "correctPassword123"And the credentials are valid in the databaseThen a response is received with Status 200 (OK)And an AuthenticatedUserResource is included in the Response Body with:id: "generated-uuid"email_address: "student@example.com"token: "jwt-token-here"roles: ["ROLE_STUDENT"]And the JWT token is valid for 1 hour (according to configuration) Scenario: Failed authentication with incorrect credentials Given the endpoint "/api/v1/authentication/sign-in" is availableWhen a POST request is sent with incorrect credentials:email: "student@example.com"password: "wrongPassword"Then a response is received with Status 401 (Unauthorized)And a message is included in the Response Body:"Invalid email or password" Scenario: Authentication with non-existent user Given the endpoint "/api/v1/authentication/sign-in" is availableWhen a POST request is sent with an email that does not exist:email: "nonexistent@example.com"password: "anyPassword123"Then a response is received with Status 401 (Unauthorized)And a message is included in the Response Body:"Invalid email or password"  Scenario: Invalid email format Given the endpoint "/api/v1/authentication/sign-in" is availableWhen a POST request is sent with a badly formatted email:email: "invalid-email-format"password: "validPassword123"Then a response is received with Status 400 (Bad Request)And a message is included:"Invalid email format" Scenario: Missing required fields Given the endpoint "/api/v1/authentication/sign-in" is availableWhen a POST request is sent without email or passwordThen a response is received with Status 400 (Bad Request)And a message is included:"Email address and password are required" |                         1 |
|      US05       |                     Posting                      | As a TeacherI want to create a post with text and imagesSo that I can interact with my students and communicate events | Scenario: Teacher opens Create Post pageGiven the teacher is authenticatedWhen the teacher navigates to "Community > New Post"Then the system displays a form with:- text area- optional image input- preview section- publish option (disabled until valid) Scenario: Teacher creates a text-only post successfullyGiven the "New Post" form is displayedWhen the teacher enters valid textAnd no image is providedThen the system publishes the postAnd shows a success messageAnd the new post appears in the community feed Scenario: Edit a post successfullyGiven the teacher is authenticatedAnd the teacher has an existing postWhen the teacher edits the post with valid changesThen the system updates the postAnd the updated version is shown in the community feedAnd a confirmation message is displayed Scenario: Delete a post successfullyGiven the teacher is authenticatedAnd the teacher has an existing postWhen the teacher deletes the postThen the system removes it from the community feedAnd a confirmation message is displayed |                         3 |
|      US06       |           Posting through RESTful API            | As a DeveloperI want to create a community post via the APISo that professors can publish validated content safely | Feature: Community Posts API Scenario: Create post with valid text and one image URLGiven the endpoint "/api/v1/community/posts" is availableAnd the requester has ROLE_PROFESSORWhen a POST request is sent with:text: "Nos vemos en el taller del viernes. Material en el enlace."images: ["https://cdn.example.com/materiales/banner.png"]Then 201 is returnedAnd a Post Resource with a generated id is returnedAnd the image URL is stored as a URL field in the databaseAnd an audit event "community.post.created" is recorded Scenario: Create text-only postGiven the endpoint is availableAnd the requester has ROLE_PROFESSORWhen a POST request is sent with:text: "Recordatorio: entrega del reto 2 el domingo 23:59."images: []Then 201 is returnedAnd the post contains no imagesAnd an audit event "community.post.created" is recorded Scenario: Reject non-HTTP/HTTPS image URLGiven the endpoint is availableAnd the requester has ROLE_PROFESSORWhen a POST request is sent with:text: "Adjunto imagen del diagrama."images: ["ftp://example.com/diagram.jpg"]Then 400 is returnedAnd the message includes "Image URL must use HTTP or HTTPS" Scenario: Update post with new text and image URLGiven the endpoint "/api/v1/community/posts/{id}" is availableAnd the requester has ROLE_PROFESSORAnd the requester owns the postWhen a PUT request is sent with:text: "Actualización: el taller se movió al sábado."images: ["https://cdn.example.com/materiales/updated-banner.png"]Then 200 is returnedAnd the Post Resource reflects the new text and image URLAnd an audit event "community.post.updated" is recorded Scenario: Delete post successfullyGiven the endpoint "/api/v1/community/posts/{id}" is availableAnd the requester has ROLE_PROFESSORAnd the requester owns the postWhen a DELETE request is sentThen 204 is returnedAnd the post is no longer retrievableAnd an audit event "community.post.deleted" is recorded |                         3 |
|      US07       |                      Liking                      | As a StudentI want to like or unlike a community postSo that I can express my opinion and support others | Scenario: Like a post successfullyGiven the student is authenticatedAnd the community feed is displayedWhen the student likes a postThen the option changes to "Unlike"And the like counter increases by 1And a confirmation message is shown Scenario: Unlike a post successfullyGiven the student has already liked a postWhen the student unlikes the postThen the option changes back to "Like"And the like counter decreases by 1And a confirmation message is shown Scenario: Prevent multiple submissionsGiven the student attempts to like a post repeatedlyThen the system processes only one actionAnd the counter reflects a single like |                         3 |
|      US08       |                    Commenting                    | As a StudentI want to write a comment under a postSo that I can participate in the discussion | Scenario: Add valid commentGiven the student is authenticatedAnd the post detail view is openWhen the student enters text between 3 and 500 charactersThen the comment is displayed under the postAnd a confirmation message is shown Scenario: Empty commentGiven the post detail view is openWhen the student submits without entering textThen the system shows an error "Comment cannot be empty" Scenario: Too long commentGiven the post detail view is openWhen the student enters more than 500 charactersThen the system shows an error "Comment must not exceed 500 characters" Scenario: Unsupported characters in commentGiven the post detail view is openWhen the student enters text with unsupported charactersThen the system shows an error "Unsupported characters detected"And the comment is not published |                         3 |
|      US09       |                Liking through API                | As a DeveloperI want to register likes/unlikes through the APISo that user interactions are consistent and secure | Scenario: Like post successfullyGiven the endpoint /api/v1/community/posts/{id}/like is availableWhen a POST request is sent with a valid tokenThen Status 200 is returnedAnd the response body includes the updated likeCount Scenario: Unlike post successfullyGiven the endpoint /api/v1/community/posts/{id}/like is availableWhen a DELETE request is sent with a valid tokenThen Status 200 is returnedAnd the likeCount decreases by 1 Scenario: Double like attemptWhen a POST request is sent twice for the same user and postThen the second request returns 200And the likeCount remains the same |                         3 |
|      US10       |              Commenting through API              | As a DeveloperI want to add, validate, and store comments through the APISo that students can safely interact under posts | Scenario: Add valid commentGiven the endpoint /api/v1/community/posts/{id}/comments is availableWhen a POST request is sent with:text: Good job, this material is clear"Then Status 201 is returnedAnd the Comment Resource includes id, authorId, text, createdAt Scenario: Reject empty commentWhen a POST request is sent with text: ""Then Status 400 is returnedAnd the message "Comment cannot be empty" is included Scenario: Reject text too longWhen a POST request is sent with text longer than 500 charactersThen Status 400 is returnedAnd the message "Comment must not exceed 500 characters" Scenario: Reject unsupported charactersWhen a POST request is sent with text containing 汉字Then Status 400 is returnedAnd the message "Unsupported characters detected" |                         3 |
|      US11       |      Add Profile settings through Front-end      | As a StudentI want to edit my profile (name, username, avatar)So that I can personalize my experience in the platform | Scenario: Open Profile SettingsGiven the student is authenticatedWhen the student navigates to "Account > Profile"Then the system displays a form with:- Full Name (required)- Username (required)- Avatar URL (optional, http/https only)- Institution (required)- save option (disabled until valid) Scenario: Update full name successfullyGiven the Profile form is displayedWhen the student enters a valid name of 3–80 characters (Latin charset)Then the system updates the profileAnd the header reflects the new nameAnd a confirmation message is shown Scenario: Update username successfullyGiven the Profile form is displayedWhen the student enters a valid and available username (3–24, letters/numbers/underscores, starts with letter)Then the profile updates with the new usernameAnd a confirmation message is shown Scenario: Username takenGiven the Profile form is displayedWhen the student enters a username that already existsThen the system shows an error "Username is already taken" |                         6 |
|      US12       |          Add Create Profile through API          | As a DeveloperI want to create a user profile via APISo that new users can initialize their profile | Scenario: Create profile successfullyGiven the endpoint "/api/v1/profile" is availableWhen a POST is sent with valid fullName, username, avatarUrl (https), institutionThen Status 201 is returnedAnd the ProfileResource includes id and the stored URL (not base64) Scenario: Username already existsWhen a POST is sent with username "juan_perez" that is already takenThen Status 409 is returnedAnd the message "Username is already taken" is included Scenario: Reject non-HTTP/HTTPS avatarWhen a POST is sent with avatarUrl "ftp://example.com/a.jpg"Then Status 400 is returnedAnd the message "Avatar URL must use HTTP or HTTPS" is included Scenario: Reject unsupported charactersWhen a POST is sent with fullName containing unsupported characters (e.g., 汉字 or emojis)Then Status 400 is returnedAnd details point to the invalid characters |                         6 |
|      US13       |          Add Update Profile trough API           | As a DeveloperI want to update an existing user profile via APISo that users can edit their name, username and avatar | Scenario: Update username to a new available valueGiven the endpoint "/api/v1/profile" is availableAnd the requester is the profile ownerWhen a PUT is sent with username "mateo_dev"Then Status 200 is returnedAnd the profile shows username "mateo_dev" Scenario: Update avatar with valid https URLWhen a PUT is sent with avatarUrl "https://cdn.example.com/u/avatar.png"Then Status 200 is returnedAnd the avatarUrl is persisted as link (not inline/base64) Scenario: Reject inline/base64 avatarWhen a PUT is sent with avatarUrl "data:image/png;base64,...."Then Status 400 is returnedAnd the message "Inline/base64 images are not allowed" is included |                         6 |
|      US14       |      Add pogress for student via Front-end       | As a StudentI want to view my level, points, badges, and streakSo that I stay motivated and track my growth | Scenario: Open Progress DashboardGiven the student is authenticatedWhen the student navigates to "Progress"Then the system displays:- current level with progress bar to next level- total points and weekly points- latest 5 badges with tooltip- current and longest streak- links to view all badges and history Scenario: View points history (last 30 days)Given the Progress page is displayedWhen the student selects the last 30 days optionThen a daily line chart shows earned points per dayAnd hovering shows the date and points Scenario: Empty state for new studentsGiven the student has no points and no badgesWhen the Progress page is displayedThen the system shows an encouraging empty state with tips to start challenges |                         7 |
|      US15       |        Add Leaderboard through Front-end         | As a StudentI want to view leaderboards by scope (global, class, challenge)So that I can compare my progress and stay engaged | Scenario: View Global leaderboard (All-time)Given the student is authenticatedWhen the student opens "Leaderboards" and selects scope "Global" and period "All"Then the system shows a paginated table with:- Rank #, Username, Level, Points- My row highlighted (even if not on current page) Scenario: View Class leaderboard (weekly)Given the student is enrolled in class "CS-101"When the student selects scope "Class" and class "CS-101" and period "Weekly"Then the table shows top students for that class this weekAnd ties are resolved by:1) Higher Level2) Earlier achievement timestamp Scenario: View Challenge leaderboard (this challenge)Given the student opens a challenge detailWhen the student switches to the "Leaderboard" tabThen the table shows rank for this challenge onlyAnd only students with a valid submission appear Scenario: Filters and paginationGiven the leaderboard is displayedWhen the student changes period to "Monthly" and page to 2Then the table refreshes with the correct results Scenario: Privacy & visibilityGiven some students have privacy set to “hide name”When the leaderboard is renderedThen those entries display masked names (e.g., "Student-****")And my own entry is always fully visible to me |                         7 |
|      US16       |             Add progress through API             | As a DeveloperI want to return current progress (level, points, badges, streak)So that the student dashboard can be rendered | Scenario: Get my progress successfullyGiven the endpoint "/api/v1/progress/me" is availableAnd the requester has ROLE_STUDENTWhen a GET request is sentThen Status 200 is returned with level, points, badges, streak |                         7 |
|      US17       |           Add Leaderboard through APi            | As a DeveloperI want a unified leaderboard endpointSo that the client can fetch ranks by scope and period | Scenario: Get Global leaderboard (All-time)Given the endpoint "/api/v1/leaderboards" is availableWhen a GET is sent with scope=global&period=all&page=1&size=25Then Status 200 is returned with a paginated listAnd entries are sorted by points desc, ties resolved by level desc, then firstAchievedAt ascAnd myEntry is included even if not on the current page Scenario: Get Class leaderboard (Weekly) with membershipGiven the requester is enrolled in class "cls_CS101_2025_2"When a GET is sent with scope=class&classId=cls_CS101_2025_2&period=weeklyThen Status 200 is returnedAnd only members of the class are ranked Scenario: Reject Class leaderboard without membershipGiven the requester is not enrolled in "cls_MATH101"When a GET is sent with scope=class&classId=cls_MATH101&period=weeklyThen Status 403 is returnedAnd a message "You are not a member of this class" is included Scenario: Get Challenge leaderboardWhen a GET is sent with scope=challenge&challengeId=ch_ABC123Then Status 200 is returnedAnd only students with valid submissions for that challenge appear |                         7 |
|      US18       | Add Unified list of activities through Front-end | As a StudentI want to see all my assigned activities in one placeSo that I can plan and prioritize my study time | Scenario: Open "My Activities"Given the student is authenticatedWhen the student navigates to "Class > My Activities"Then the system shows a paginated list with columns:- Title, Type (Challenge/Quiz/Lab/Assignment)- Class (e.g., CS-101)- Due date (local time)- Estimated time (mins)- Status (Assigned/In progress/Submitted/Graded/Overdue) Scenario: Filter and sort activitiesGiven the activities list is displayedWhen the student filters by Status=Assigned and Due date=This weekAnd sorts by Due date ascendingThen the list updates accordingly Scenario: Search by keywordGiven the activities list is displayedWhen the student searches "Arreglos C++"Then only activities whose title or description contains the term are shown |                         8 |
|      US19       |     Add List Student Activities through API      | As a Developer, I want to fetch a student’s activities via API so that the Front-end can display them in “My Activities.” | Scenario: List my activities with filtersGiven the endpoint "/api/v1/class-activities/me" is availableWhen a GET is sent with status=ASSIGNED,IN_PROGRESS&type=CHALLENGE,QUIZ&sort=dueAt,ascThen Status 200 is returned with a paginated listAnd all items belong to the requester student  Scenario: Rate limitedGiven the endpoint "/api/v1/class-activities/me" is availableAnd the requester exceeds the rate limitWhen a GET is sentThen Status 429 is returnedAnd the response includes "Retry-After" header Scenario: Upstream timeoutGiven the endpoint depends on ActivityServiceAnd ActivityService times outWhen a GET is sentThen Status 504 is returnedAnd the response contains title "Gateway Timeout" Scenario: Unexpected server errorGiven the endpoint "/api/v1/class-activities/me" is availableWhen an unhandled exception occursThen Status 500 is returnedAnd the response contains an error id for diagnostics |                         8 |
|      US20       |         Add Activity Details through API         | As a Developer, I want to retrieve activity details so that students can view instructions, links, and submission options. | Scenario: Get activity detailGiven the requester belongs to class "cls_CS101_2025_2"When a GET is sent to "/api/v1/class-activities/act_01H"Then Status 200 is returned with the activity detail Scenario: Submission disabled due to due date passedGiven the activity "act_01H" existsAnd its dueAt is in the pastWhen a GET is sent to "/api/v1/class-activities/act_01H"Then Status 200 is returned with the activity detailAnd the payload has submission.locked=trueAnd submission.lockReason="DUE_DATE_PASSED" Scenario: Rate limitedGiven the requester exceeds the rate limitWhen a GET is sent to "/api/v1/class-activities/act_01H"Then Status 429 is returnedAnd the response includes "Retry-After" header Scenario: Unexpected server errorGiven the endpoint "/api/v1/class-activities/{activityId}" is availableWhen an unhandled exception occursThen Status 500 is returnedAnd the response contains an error id for diagnostics |                         8 |
|      US21       |      Add View Class Progress via Front-end       | As a TeacherI want a class progress overview with key metrics (completion, average score, late submissions)So that I can quickly spot strengths and weaknesses at a glance. | Scenario: View progress for a classGiven I am assigned to class "cls_CS101_2025_2"When I open "Class Progress"Then I see completionRate and avgScore for the classAnd a table of students with completion% and lastSubmissionAt Scenario: No data yetGiven the class has no activitiesWhen I open "Class Progress"Then I see the message "No activities yet" |                         9 |
|      US22       |          View Student Progress (Detail)          | As a TeacherI want to open a student’s progress detailSo that I can review their completed/pending activities. | Scenario: Open student detailGiven I am on "Class Progress"When I select student "std_01R"Then I see their list of activities with title, status, dueAt, score Scenario: Student without submissionsGiven student "std_01R" has no submissionsWhen I open their detailThen I see "No submissions yet" |                         9 |
|      US23       |              Create Activity (Task)              | As a TeacherI want to create a new activity for my classSo that students can see instructions and a due date. | Scenario: Create a basic taskGiven I am assigned to "cls_CS101_2025_2"When I create an activity with title, description and dueAtThen the activity appears in the class activity list with status "DRAFT" Scenario: Publish the activityGiven an activity is in "DRAFT"When I publish itThen students in the class can see it in their activities |                         9 |
|      US24       |     Add Edit / Close Activity via Front-end      | As a TeacherI want to edit an existing activity and optionally close submissionsSo that I can correct details and stop late work. | Scenario: Edit title and due dateGiven the activity is in "DRAFT"When I update title and dueAtThen the changes are saved Scenario: Close submissionsGiven the activity is "PUBLISHED"When I set "acceptSubmissions" to falseThen students can no longer submit |                         9 |
|      US25       |            Progress API (class-level)            | As a DeveloperI want an endpoint to retrieve class progress (simple metrics + student rows)So that the UI can render the progress view. | Scenario: Authorized teacher gets class progressGiven caller has ROLE_TEACHER and is assigned to {classId}When GET /teacher/{classId}/progressThen Status 200 with completionRate, avgScore and students[] Scenario: UnauthenticatedWhen GET /teacher/{classId}/progress without AuthorizationThen Status 401 with application/problem+json Scenario: Forbidden (not assigned)Given caller has ROLE_TEACHER but not assigned to {classId}When GET /teacher/{classId}/progressThen Status 403 with problem+json title "Forbidden" Scenario: Class not foundWhen GET /teacher/cls_UNKNOWN/progressThen Status 404 with problem+json title "Class Not Found" Scenario: Server errorWhen an unexpected error occursThen Status 500 with problem+json and an errorId |                         9 |
|      US26       |               Create Activity API                | As a DeveloperI want an endpoint to retrieve a single student’s activity list in a classSo that the UI can show their detail. | Scenario: Authorized teacher gets student progressGiven caller has ROLE_TEACHER and is assigned to {classId}When GET /teacher/{classId}/students/{studentId}/progressThen Status 200 with activities[] Scenario: Student not in classGiven the student is not enrolled in {classId}When GET /teacher/{classId}/students/{studentId}/progressThen Status 404 with problem+json title "Student Not Found" Scenario: Unauthenticated / Forbidden / Server errorThen return 401 / 403 / 500 respectively with problem+json |                         9 |
|      US27       |        Update/Publish/Close Activity API         | As a DeveloperI want to create a class activitySo that teachers can add tasks. | Scenario: Valid creationGiven caller has ROLE_TEACHER and is assigned to classIdWhen POST /class-activities with valid bodyThen Status 201 with activityId and status "DRAFT" Scenario: UnauthenticatedWhen POST without AuthorizationThen Status 401 problem+json Scenario: ForbiddenGiven caller not assigned to classIdWhen POST with that classIdThen Status 403 problem+json Scenario: Validation errorWhen title is blank or dueAt is in the pastThen Status 422 with problem+json and errors[] per field Scenario: Duplicate title (same class and dueAt)Given an activity with same title and dueAt existsWhen POST againThen Status 409 problem+json title "Activity Conflict" Scenario: Server errorThen Status 500 problem+json with errorId |                         9 |
|      US28       | Submit and See Instant Feedback (auto-gradable)  | As a StudentI want to see my score and basic feedback right after I submit an auto-gradable activitySo that I know what I did right or wrong immediately. | Scenario: Immediate feedback after submissionGiven the activity "act_QZ1" is PUBLISHED and auto-gradableAnd I am enrolled in class "cls_CS101_2025_2"When I submit my answersThen I see my score and per-item correctnessAnd I see a short explanation for each incorrect item (if allowed) Scenario: Feedback policy hides solutionsGiven showSolutions=falseWhen I submitThen I see my score onlyAnd I see the message "Solutions are hidden for this activity" |                        10 |
|      US29       |              View Detailed Feedback              | As a StudentI want to open detailed feedback of my submissionSo that I can learn from explanations and rubric notes. | Scenario: Open feedback detailGiven I have a successful submission for "act_QZ1"When I open "View feedback"Then I see question-by-question results, explanations (if allowed), and overall score Scenario: Non auto-gradable activityGiven the activity type is TASK (manual grading)When I submitThen I see "Submission received — feedback pending" |                        10 |
|      US30       |              View Detailed Feedback              | As a StudentI want to retry an activity and get updated feedbackSo that I can improve within the allowed attempts. | As a StudentI want to retry an activity and get updated feedbackSo that I can improve within the allowed attempts. |                        10 |
|      US31       |    Create Submission with Immediate Feedback     | As a DeveloperI want an endpoint that creates a submission and (if auto-gradable) returns immediate feedbackSo that the students can read results right away. | Scenario: Successful auto-graded submissionGiven the activity is PUBLISHED and auto-gradableAnd the student is enrolled and has attemptsRemaining > 0When POST /class-activities/{activityId}/submissions with valid answersThen Status 201 with score and items[] feedback Scenario: Forbidden (not enrolled)Given the caller is not enrolled in the classWhen POSTThen Status 403 with problem+json title "Forbidden" Scenario: Activity not found or not publishedWhen POST for an unknown or non-PUBLISHED activityThen Status 404 with title "Activity Not Found" Scenario: Attempts exhaustedGiven attemptsRemaining = 0When POSTThen Status 409 with title "Attempts Exhausted" Scenario: Submissions closed (past due or acceptSubmissions=false)When POST after dueAt or when closedThen Status 409 with title "Submissions Closed" Scenario: Validation errorWhen the body is missing required fields or malformedThen Status 422 with errors[] per field Scenario: Payload too large (file upload TASK)When the upload exceeds the limitThen Status 413 with title "Payload Too Large" Scenario: Unsupported media typeWhen the upload mime-type is not allowedThen Status 415 with title "Unsupported Media Type" Scenario: Auto-grader timeout / unavailableWhen the grader does not respond in timeThen Status 504 (timeout) or 503 (service unavailable) with problem+json Scenario: Unexpected server errorWhen an unhandled exception occursThen Status 500 with problem+json and an errorId |                        10 |
|      US32       |       Feedback Visibility Policy (simple)        | As a DeveloperI want to expose the feedback/solution visibility policy for an activitySo that the studens knows what to read after submission. | Scenario: Retrieve policyWhen GET /class-activities/{activityId}/feedback-policyThen Status 200 with booleans for showScore, showItemCorrectness, showSolutions Scenario: Not found / Unauthenticated / ForbiddenThen return 404 / 401 / 403 with problem+json respectively |                        10 |
|      US33       |              Quick Run (Sample I/O)              | As a StudentI want to run my code with sample input and see stdout/stderrSo that I can verify basic behavior before submitting. | Scenario: Run C++ code with sample inputGiven I selected language "cpp17"And I pasted my source codeAnd I provided sample inputWhen I click "Run"Then I see status "COMPLETED"And I see stdout, stderr, timeMs, memoryKb Scenario: Compile error is shownGiven my code has a syntax errorWhen I click "Run"Then I see status "COMPILE_ERROR"And I see compiler diagnostics in stderr |                        11 |
|      US34       |              Submit for Evaluation               | As a StudentI want to submit my code to be evaluated against testsSo that I receive a pass/fail per test and a score. | Scenario: Immediate feedback for hidden testsGiven activity "act_CPP1" allows auto-gradingWhen I submit my code for evaluationThen I see a summary with totalPassed/totalTests and scoreAnd I can expand to view each test verdict and execution metrics Scenario: Solutions hidden by policyGiven solutions are hiddenWhen I open a failed testThen I see "Input/Expected/Output hidden by policy" |                        11 |
|      US35       |                   Run History                    | As a StudentI want to see my recent runs with verdictsSo that I can compare attempts and improvements. | Scenario: View last 10 runsGiven I opened "Run history"When the list loadsThen I see runId, createdAt, languageId, verdict, timeMs for the last 10 runs |                        11 |
|      US36       |            Add Create Run trough API             | As a DeveloperI want an acces to compile & run code in a sandboxSo that the UI can request executions safely. | Scenario: Run created (queued)Given a valid request with languageId "cpp17" and sourceWhen POST /code-runner/runsThen Status 201 with runId and status "QUEUED" Scenario: Invalid languageWhen POST with languageId "h4x0r"Then Status 422 with problem+json and errors[languageId] Scenario: Payload too largeWhen POST with source > max sizeThen Status 413 with title "Payload Too Large" Scenario: UnauthenticatedWhen POST without AuthorizationThen Status 401 with problem+json Scenario: Rate limitedGiven user exceeded run quotaWhen POSTThen Status 429 with "Retry-After" header |                        11 |
|      US37       |          Add Get Run Result trough API           | As a DeveloperI want resources to fetch execution results (and optionally stream updates)So that the UI can display status and outputs. | Scenario: Completed run with outputGiven runId "run_01H" existsWhen GET /runs/run_01HThen Status 200 with status "COMPLETED" and artifacts URLs Scenario: Compile errorGiven the run failed to compileWhen GET /runs/{runId}Then Status 200 with status "COMPILE_ERROR"And compileLogUrl is present Scenario: Run not foundWhen GET /runs/unknownThen Status 404 with problem+json |                        11 |
|      US38       |  Add Evaluate Against Activity Tests trough API  | As a DeveloperI want to run the submission against configured tests for an activitySo that the system can compute verdicts and scores immediately. | Scenario: Successful evaluationGiven activity "act_CPP1" has tests configuredWhen POST /activities/act_CPP1/evaluate with valid C++ codeThen Status 201 with summary and per-test verdicts Scenario: Submissions closedGiven activity no longer accepts submissionsWhen POST evaluateThen Status 409 with title "Submissions Closed" Scenario: Activity not foundWhen POST to an unknown activityIdThen Status 404 with problem+json Scenario: Grader unavailableWhen the test harness is downThen Status 503 with title "Service Unavailable" |                        11 |
|      US39       |   Add Sandbox & Policy Enforcement trough API    | As a DeveloperI want consistent verdicts for resource and security violationsSo that the UI can explain failures clearly. | Scenario: Time limit exceededGiven timeLimitMs=2000When the process exceeds 2000msThen status "TIME_LIMIT" and verdict "TL" are returned Scenario: Memory limit exceededWhen the process exceeds memoryLimitKbThen status "MEMORY_LIMIT" and verdict "ML" are returned Scenario: Sandbox violation (e.g., fork/exec/network)When the program attempts a forbidden syscallThen status "SANDBOX_VIOLATION" and verdict "SV" are returned |                        11 |
|      US40       |                 Create Challenge                 | As an TeacherI want to create a challenge with title, statement, languages and difficultySo that students can attempt it. | Scenario: Create a new challengeGiven I am an authenticated authorWhen I fill title, statement, allowedLanguages (e.g., cpp17), difficulty and saveThen the challenge is created with status "DRAFT" Scenario: Validation errors on required fieldsWhen title is empty or allowedLanguages is missingThen I see inline errors and cannot save |                        12 |
|      US41       |         Configure Pre-Submit Validations         | As an TeacherI want to configure compile-only requirement and linting rules per languageSo that students receive static feedback before any execution. | Scenario: Enable compile-only requirementGiven a draft challengeWhen I toggle "Require successful compile before submit"Then the policy shows compileRequired=true for selected languages Scenario: Select lint engine and severity thresholdGiven a draft challengeWhen I choose engine "clang-tidy" and threshold "ERROR"And I enable rules "modernize-*", "readability-*"Then the lint policy is saved with those selections Scenario: Forbidden constructs and limitsGiven a draft challengeWhen I add bannedHeaders=<bits/stdc++.h> and maxFileSizeKb=128Then the policy reflects those constraints |                        12 |
|      US42       |          Publish / Unpublish Challenge           | As an TeacherI want to publish or unpublish a challengeSo that it becomes available or hidden to students. | Scenario: Publish a valid challengeGiven the challenge has required metadata and a validation policyWhen I click "Publish"Then the status changes to "PUBLISHED" Scenario: Block publish on missing policyGiven the challenge lacks a validation policyWhen I click "Publish"Then I see "Add a validation policy before publishing" |                        12 |
|      US43       |          Challenge resources trough API          | As a DeveloperI want endpoints to create, read, update and publish challengesSo that the UI can manage the challenge lifecycle. | Scenario: Create draftWhen POST /challenges with {title, statement, allowedLanguages, difficulty}Then 201 with {challengeId, status:"DRAFT"} Scenario: Get challengeWhen GET /challenges/{challengeId}Then 200 with metadata and current status Scenario: Publish with missing policyGiven the challenge has no validation policyWhen POST :publishThen 409 with title "Missing Validation Policy" Scenario: Unauthenticated / ForbiddenWhen calling any endpoint without proper auth/RBACThen 401 or 403 with problem+json Scenario: Not found / Server errorThen 404 or 500 with problem+json |                        12 |
|      US44       |              Live Session Dashboard              | As a TeacherI want to see studentCount, responseDistribution, and averageResponseTimeSo that I can monitor the class in real time. | Scenario: View live metrics for a sessionGiven I am assigned to class "cls_CS101_2025_2"And session "ses_01A" is activeWhen I open "Live Analytics"Then I see studentCount, totalResponses, averageResponseTimeMsAnd I see responseDistribution for the current question Scenario: No responses yetGiven session "ses_01A" is active with zero responsesWhen I open "Live Analytics"Then I see "Waiting for responses..." and studentCount |                         4 |
|      US45       |           Response Distribution Chart            | As a TeacherI want a chart of responses (A/B/C/D or numbers)So that I can identify misconceptions quickly. | Scenario: Show categorical distributionGiven the current question is multiple choiceWhen responses arriveThen the chart displays counts per option (A,B,C,D) |                         4 |
|      US46       |                Average Time Panel                | As a TeacherI want to see the average response time for the current questionSo that I can pace the session. | Scenario: Show average response timeGiven responses include timingWhen I view "Timing"Then I see averageResponseTimeMs for the current question |                         4 |
|      US47       |               Events Ingestion API               | As a DeveloperI want to ingest participation events (join/response)So that the aggregator can compute real-time metrics. | Scenario: Accept valid batchWhen POST with well-formed events for session "ses_01A"Then Status 202 and accepted equals the number of events Scenario: UnauthenticatedWhen POST without AuthorizationThen Status 401 problem+json Scenario: Forbidden (not producer for class/session)When POST by an unauthorized clientThen Status 403 problem+json Scenario: Validation errorWhen an event has missing questionId for RESPONSE_SUBMITTEDThen Status 422 with errors[] pointing to events[i].questionId Scenario: Payload too largeWhen events array exceeds max sizeThen Status 413 with title "Payload Too Large" Scenario: Rate limitedWhen producer exceeds QPSThen Status 429 with "Retry-After" Scenario: Aggregator unavailableWhen the ingestion pipeline is downThen Status 503 with title "Service Unavailable" |                         4 |
|      US48       |               Real-time Stream API               | As a DeveloperI want to stream live snapshots to the teacher UISo that metrics update without polling. | Scenario: Authorized teacher subscribesGiven caller has ROLE_TEACHER and is assigned to the sessionWhen GET /sessions/ses_01A/streamThen Status 200 and SSE events "snapshot" and "heartbeat" are received Scenario: Unauthenticated / Forbidden / Session not foundThen return 401 / 403 / 404 with problem+json and no stream Scenario: Idle timeoutGiven no updates for N secondsWhen the server sends periodic heartbeatThen the client stays connected and does not show stale data |                         4 |
|      US49       |             View Quiz Summary Report             | As an AdminI want to view average score, participation rate, and average response time for a quizSo that I can gauge overall performance. | Scenario: View quiz summaryGiven I am an administratorAnd quiz "quiz_1001" has graded submissionsWhen I open "Quiz Reports" for quiz_1001Then I see avgScore, participationRate, averageResponseTimeMsAnd the time range and class filters applied are visible Scenario: No data in rangeGiven there are no graded submissions in the selected date rangeWhen I view the reportThen I see "No data for selected range" |                         5 |
|      US50       |                Hardest Questions                 | As an AdminI want a list of the hardest questions (lowest correctness rate)So that I can spot misconceptions. | Scenario: List hardest questionsGiven quiz_1001 has question-level resultsWhen I open "Hardest Questions"Then I see a table with questionId, correctnessRate, attempts, avgTimeMsAnd the table is sorted ascending by correctnessRate |                         5 |
|      US51       |                 Quiz Summary API                 | As a DeveloperI want an endpoint to retrieve quiz-level metricsSo that the UI can render the summary panel. | Scenario: Authorized admin retrieves summaryGiven caller has ROLE_ADMINWhen GET /analytics/quizzes/{quizId}/summary with valid filtersThen Status 200 with metrics.avgScore, participationRate, averageResponseTimeMs Scenario: UnauthenticatedWhen GET without AuthorizationThen Status 401 problem+json Scenario: ForbiddenGiven caller lacks ROLE_ADMINWhen GETThen Status 403 problem+json title "Forbidden" Scenario: Quiz not foundWhen GET for unknown quizIdThen Status 404 problem+json Scenario: Invalid date rangeWhen from > toThen Status 422 with errors[] on from/to Scenario: Server errorThen Status 500 with problem+json and errorId |                         5 |
|      US52       |              Per-Question Stats API              | As a Developer I want an endpoint to retrieve per-question statisticsSo that the UI can show hardest questions and drilldowns. | Scenario: Fetch per-question statsGiven ROLE_ADMINWhen GET /analytics/quizzes/{quizId}/questions?sort=correctnessRate,ascThen Status 200 with content[] and pagination Scenario: Unsupported sort fieldWhen sort=hackerField,ascThen Status 400 with detail "Unsupported sort field: hackerField" Scenario: Unauthenticated / Forbidden / Not found / Server errorThen return 401 / 403 / 404 / 500 with problem+json |                         5 |
|      US53       |              Token Issuance (Login)              | As a DeveloperI want the gateway to authenticate credentials and issue tokensSo that downstream services receive a verified identity. | Scenario: Issue tokens on valid credentialsGiven the user exists and the password hash matchesWhen POST /auth/login with valid bodyThen 200 with accessToken (JWT) and refreshToken Scenario: Reject invalid credentialsWhen POST /auth/login with wrong passwordThen 401 with title "Unauthorized" Scenario: Enforce lockoutGiven 5 failed attempts within 10 minutesWhen POST /auth/loginThen 423 with title "Account Locked" |                         2 |

## 3.3. Impact Mapping.
## 3.4. Product Backlog.





